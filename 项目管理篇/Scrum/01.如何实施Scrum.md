# 如何实施Scrum


## 什么是Scrum

* Scrum和极限编程(XP)都要求团队在每一次迭代的结尾完成一些可以交付的工作片段. 迭代要短, 有时间限制.

* 将注意力集中在短时间内交付可工作的代码, 这就意味着Scrum和XP团队没有时间进行理论研究.

* 他们不会花时间用建模工具来画UML图、编写完美的需求文档, 也不会为了应对在可预计的未来中所有可能发生的变化而去写代码.

* 实际上, Scrum和XP都关注如何把事情做好. 这些团队承认在开发过程中会犯错, 但是他们明白; 要投入实践中, 动手去构建产品, 这才是找出错误的最好方式; 不要只是停留在理论层次上对软件进行分析和设计.


## 编写产品backlog

产品backlog是Scrum的核心, 也是一切的起源. 从根本上说, 它就是一个需求、或故事、或特性等组成的列表, 按照重要性的级别进行了排序. 它里面包含的是客户想要的东西, 并用客户的术语加以描述.

我们叫它故事(story), 有时候也叫做backlog条目.

我们的故事包含这样一些字段:

* ID--统一标识符, 就是个自增的数字而已. 以防重命名故事以后找不到它们.

* Name(名称)--简短的、描述性的故事名, 比如“查看你自己的交易明细”. 它必须要**含义明确**, 这样开发人员和产品负责人才能大致明白我们说的是什么东西, 跟其他的故事区分开. 它一般由2到10个字组成.

* Importance(重要性)--产品负责人评出一个数值, 指示这个故事有多重要, 例如10或150, 分数越高越重要.

    避免“优先级”这样的说法, 因为一般来说1都表示“最高”优先级, 如果后来有其他更重要的东西就麻烦了, 它的优先级评级应该是什么呢? 优先级0? 优先级-1?

* Initial estimate(初始估算)--团队的初步估算, 表示与其他故事相比, 完成该故事所需的工作量. 最小的单位是故事点(story point), 一般大致相当于一个“理想的人天(man-day)”.

    * 问一下你的团队, “如果可以投入最适合的人员来完成这个故事(人数要适中, 通常为2个), 把你们锁到一个屋子里, 有很多食物, 在完全没有打扰的情况下工作, 那么需要几天, 才能给出一个经过测试验证, 可以交付的完整实现呢?”如果答案是“把3个人关在一起, 大约需要4天时间”, 那么初始估算的结果就是12个故事点.

    * 不需要保证这个估值绝对无误(比如两个故事点的故事就应该花两天时间), 而是要保证相对的正确性(即两个点的故事所花费的时间应该是四个点的故事所需的一半)

* How to demo(如何做演示)--它大略描述了这个故事应该如何在sprint演示上进行示范, 本质就是一个简单的测试规范. “先这样做, 然后那样做, 就应该得到......的结果”.

    * 如果你在使用TDD(测试驱动开发), 那么这段描述就可以作为验收测试的伪码表示.

* Notes(注解)--相关信息、解释说明和对其它资料的引用等等, 一般都非常简短.

| 产品BACKLOG(示例) ||||||
|----|----------------|-------|-----|-----------------|-----------|
| ID |      Name      |  Imp  | Est |   How to demo   |   Notes   |
|----|----------------|-------|-----|-----------------|-----------|
| 1  | 存款           | 30    | 5   | 登录, 打开存款界面, 存入 10 欧元, 转到我的账户余额界面, 检查我的余额增加了10 欧元. | 需要UML顺序图, 目前不需要考虑加密的问题. |
| 2  | 查看自己的交易明细 | 10    | 8   | 登录, 点击“交易”, 存入一笔款项. 返回交易页面, 看到新的存款记录显示在页面上 | 使用分页技术避免大规模的数据库查询, 和查看用户列表的设计相似. |

### 额外的故事字段

有时为了便于产品负责人判断优先级别, 我们也会在产品backlog中使用一些其它字段.

* Track(类别)--当前故事的大致分类, 例如“后台系统”或“优化”. 这样产品负责人就可以很容易选出所有的“优化”条目, 把它们的级别都设得比较低, 类似的操作执行起来都很方便.

* Components(组件)--通常在Excel文档中用“复选框”, 例如“数据库, 服务器, 客户端”. 团队或者产品负责人可以在这里进行标识, 以明确哪些技术组件在这个故事的实现中会被包含进来. 这种做法在多个Scrum团队协作的时候很有用--比如一个后台系统团队和一个客户端团队--他们很容易知道自己应当对哪些故事负责.

* Requestor(请求者)--产品负责人可能需要记录是哪个客户或相关干系人最先提出了这项需求, 在后续开发过程中向他提供反馈.

* Bug tracking ID(Bug跟踪ID)--如果你有个bug追踪系统, 就像我们用的Jira一样, 那么了解一下故事与bug之间的直接联系就会对你很有帮助.

### 让产品backlog停留在业务层次上

产品负责人只需要关注业务目标, 如何解决问题的应该是开发团队.


## 准备sprint计划

**在sprint计划会议之前, 要确保产品backlog井然有序.**

* 产品backlog必须存在.

* 只能有一个产品backlog和一个产品负责人(对于一个产品而言).

* 所有重要的backlog条目都已经根据重要性被评过分, 不同的重要程度对应不同的分数.

    * 重要程度比较低的backlog条目, 评分相同也没关系, 因为它们可能在这次sprint计划会议上可能根本不会被提出来.

    * 无论任何故事, 只要产品负责人相信它会在下一个sprint实现, 那它就应该被划分到一个特有的重要性层次.

    * 分数只是用来根据重要性对backlog进行排序. 假设A的分数为20, 而B的分数为100, 那仅仅是说明B比A重要而已, 绝不意味着B比A重要五倍.

    * 最好在分数之间留出适当间隔, 以防后面出现一个C, 比A重要而不如B重要.

* 产品负责人应当**理解**每个故事的含义(通常故事都是由他来编写的, 但是有时候其他人也会添加一些请求, 产品负责人对它们划分先后次序). 他不需要知道每个故事具体是如何实现的, 但是他要知道为什么这个故事会在这里.

**注意:** 产品负责人之外的人也可以向产品backlog中添加故事, 但是他们不能说这个故事有多重要, 这是产品负责人独有的权利. 他们也不能添加时间估算, 这是开发团队独有的权利.


## 制定sprint计划

Sprint计划会议会产生一些实实在在的成果:

* sprint目标

* 团队成员名单(以及他们的投入程度, 如果不是100%的话)

* sprint backlog(即sprint中包括的故事列表)

* 确定好sprint演示日期

* 确定好时间地点, 供举行每日scrum会议

### 为什么产品负责人必须参加

### 为什么不能在质量上让步

**经验告诉我: 牺牲内部质量是一个糟糕透顶的想法. 现在节省下来一点时间, 接下来的日子里你就要一直为它付出代价. 一旦我们放松要求, 允许代码库中暗藏问题, 后面就很难恢复质量了.**

### Sprint计划会议日程

Sprint计划会议: 13:00————17:00(每小时休息10分钟)

* 13:00————13:30. 产品负责人对sprint目标进行总体介绍, 概括产品backlog, 定下演示的时间地点.

* 13:30————15:00. 团队估算时间, 在必要的情况下拆分backlog条目. 产品负责人在必要时候改重要性评分. 理清每个条目的含义. 所有重要性高的backlog条目都要填写“如何演示”.

* 15:00————16:00. 团队选择要放入sprint中的故事. 计划生产率, 用作核查工作安排的基础.

* 16:00————17:00. 为每日scrum会议(以下简称每日例会)安排固定的时间地点(如果和上次不同的话), 把故事进一步拆分成任务.

这个日程绝不是强制执行的. Scrun master根据会议进程的需要, 可以对各个阶段的子进程时间安排进行调整.

### 确定sprint长度

* Sprint演示日期是sprint计划会议的产出物, 它被确定下来以后, 也就确定了sprint的长度.

* 时间短更“敏捷”, 时间长有助于达成sprint目标.

* 刚开始要试验sprint的长度, 不要浪费太多时间做分析. 选一个可以接受的长度先开始再说, 等做完一两个sprint再进行调整.

* 绝大部分团队的sprint长度都是三周, 它不长不短, 既让我们拥有足够的敏捷性, 又让团队进入“流”的状态, 同时还可以解决sprint中出现的问题.

### 确定sprint目标

* 制定sprint的目标确实很困难, 但是聊胜于无.

* sprint目标应该是尚未达成的.

### 决定sprint要包含的故事

决定哪些故事需要在这个sprint中完成, 是sprint计划会议的一个主要活动. 更具体地说, 就是哪些故事需要从产品backlog拷贝到sprint backlog中.

#### 产品负责人如何对sprint放哪些故事产生影响?

#### 团队怎样决定把哪些故事放到sprint里面?

* 本能反应

* 生产率估算

    * 基于昨日天气的生产率计算
    
    * 基于可用人-天和估算投入程度的生产率计算

### 我们为何使用索引卡?

### 定义”完成“

### 使用计划纸牌做时间估算

### 明确故事内容

尽量保证产品负责人和团队对故事有同样的理解, 或者尽量避免最明显的误解.

### 把故事拆分成更小的故事

### 把故事拆分成任务

故事是可以交付的东西, 是产品负责人所关心的; 任务是不可交付的东西, 产品负责人对它也不关心.

### 定下每日例会的时间地点

下午开例会侧重于总结已经完成的事情? 上午开例会侧重于计划要完成的事情?

### 最后界限在哪里

优先级列表:

* 优先级1: sprint目标和演示日期

* 优先级2: 经过团队认可、要添加到这个sprint中的故事列表

* 优先级3: sprint中每个故事的估算值

* 优先级4: sprint中每个故事的“如何演示”

* 优先级5: 生产率和资源计算, 用作sprint计划的现实核查

* 优先级6: 明确每日例会固定举行的时间地点

* 优先级7: 把故事拆分成任务


## 怎么进行每日例会

### 怎样更新任务板


## 怎样进行sprint演示

* 坚持所有的sprint结束于演示

* 注意力放在“我们做了什么”, 而不是“我们怎么做的”

* 不要演示一大堆细碎的bug修复和微不足道的特性


## 怎样做sprint回顾

### 为什么我们坚持所有的团队都要做回顾

* 回顾是Scrum中第二重要的事件(最重要的是sprint计划会议), 因为这是你做改进的最佳时机

* 回顾过去, 展望将来

### 变, 还是不变

* 很多时候, 只要能清楚地指出问题所在, 到了下一个sprint, 问题也许就自行解决了.

* 在sprint中引入的每一点变化, 都会让团队付出相应的代价; 在引入变化之前, 可以先考虑什么都别做, 寄希望于问题自动消失(或变小).

* 如果每次有人发几句牢骚, 你就引入新的变化, 那人们就不愿意再说小问题了, 这就大为不妙.

### 问题示例

* **太多的外界干扰**, 典型动作:

    * 让团队在下一个sprint上减少投入程度, 这样就可以有更合理的计划.
    
    * 让团队在下一个sprint上把干扰因素记录得更清楚一些: 谁带来的干扰, 占用了多长时间. 也许这可以帮助我们在下次更好地解决问题.
    
    * 让团队试着将所有的干扰因素转给Scrum master或产品负责人.
    
    * 让团队指定一个人充当“守门员”, 所有的干扰都要经由他处理, 其他人就可以把注意力保持在项目上. 扮演者可以是Scrum master, 也可以大家轮流.


## 组合使用Scrum和XP

* Scrum注重的是管理和组织实践, 而XP(极限编程)关注的是实际的编程实践.

* 它们解决的是不同领域的问题, 可以互为补充, 相得益彰.